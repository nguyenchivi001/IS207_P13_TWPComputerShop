<!DOCTYPE html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="76x76" href="../Assets/img/logo.png">
    <link rel="icon" type="image/png" href="../Assets/img/logo.png">
    <title>TWPComputerShop | list product</title>
    <link rel="stylesheet" href="./css/resize_the_navigation_bar.css" />
    <link rel="stylesheet" href="./css/material-icon.css" />
    <link rel="stylesheet" href="../Assets/css/all.min.css">

  </head>
  <body class="dark-edition">
    <!-- Gọi file sidenav.html tại đây -->
    <div w3-include-html="sidenav.html" class="sidebar"></div>

    <!-- Gọi file topheader.html tại đây -->
    <div w3-include-html="topheader.html" class="main-panel"></div>

    <!-- Nội dung chính -->
    <div class="content">
      <div class="container-fluid">
        <form action="" method="post">
          <!-- Nội dung form sản phẩm của bạn -->
        </form>
      </div>
    </div>

    <!-- JavaScript để load các file HTML -->
    <script>
      function loadHTML(element, file) {
  return new Promise(function (resolve, reject) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4) {
        if (this.status == 200) {
          element.innerHTML = this.responseText;
          resolve();  // Thông báo khi thành công
        } else {
          reject();  // Thông báo khi lỗi
        }
      }
    };
    xhttp.open("GET", file, true);
    xhttp.send();
  });
}

async function includeHTML() {
  var z = document.querySelectorAll("[w3-include-html]");
  for (var i = 0; i < z.length; i++) {
    var elmnt = z[i];
    var file = elmnt.getAttribute("w3-include-html");
    if (file) {
      try {
        await loadHTML(elmnt, file);  // Chờ nội dung được tải trước khi tiếp tục
        elmnt.removeAttribute("w3-include-html");
      } catch (error) {
        console.error("Error loading HTML:", error);
      }
    }
  }
}

document.addEventListener("DOMContentLoaded", includeHTML);

   </script>

<div class="content">
  <div class="container-fluid">
    <div class="col-md-14">
      <div class="card">
        <div class="card-header card-header-primary">
          <h4 class="card-title">Danh sách sản phẩm</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive ps">
            <table class="table tablesorter" id="page1">
              <thead class="text-primary">
                <tr>
                  <th>Ảnh</th>
                  <th>Tên sản phẩm</th>
                  <th>Đơn giá</th>
                  <th>
                      <a class="btn btn-primary" href="add_product.html">Thêm mới</a>
                  </th>
                </tr>
              </thead>
              <tbody>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.html">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.php?product_id=<?php echo $product_id; ?>">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.php?product_id=<?php echo $product_id; ?>">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.php?product_id=<?php echo $product_id; ?>">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.php?product_id=<?php echo $product_id; ?>">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.php?product_id=<?php echo $product_id; ?>">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                  <tr>
                    <td><img alt="product image" src="./product_images/acer1.png" style="width:50px; height:50px; border:groove #000"></td>
                    <td><?php echo substr($product_name, 0, 36); ?></td>
                    <td><?php echo $price; ?></td>
                    <td>
                      <?php if ($_SESSION['role'] != 'e') { ?>
                        <a class="btn btn-success" href="edit_product.php?product_id=<?php echo $product_id; ?>">Edit</a>
                        <a class="btn btn-danger" href="products_list.php?product_id=<?php echo $product_id; ?>&action=delete">Delete</a>
                      <?php } ?>
                    </td>
                  </tr>
                <?php } ?>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Trước">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Trước</span>
            </a>
          </li>
          <?php for ($b = 1; $b <= $a; $b++) { ?>
            <li class="page-item"><a class="page-link" href="products_list.php?page=<?php echo $b; ?>"><?php echo $b; ?></a></li>
          <?php } ?>
          <li class="page-item">
            <a class="page-link" href="#" aria-label="Sau">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Sau</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
<div w3-include-html="footer.html"></div> 
