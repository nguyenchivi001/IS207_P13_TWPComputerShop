<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="76x76" href="../Assets/img/logo.png">
    <link rel="icon" type="image/png" href="../Assets/img/logo.png">
    <title>TWPComputerShop | Add product</title>
    <link rel="stylesheet" href="./css/resize_the_navigation_bar.css" />
  </head>
  <body class="dark-edition">
    <!-- Gọi file sidenav.html tại đây -->
    <div w3-include-html="sidenav.html" class="sidebar"></div>

    <!-- Gọi file topheader.html tại đây -->
    <div w3-include-html="topheader.html" class="main-panel"></div>

    <!-- Nội dung chính -->
    <div class="content">
      <div class="container-fluid">
        <form action="" method="post" enctype="multipart/form-data">
          <!-- Nội dung form sản phẩm của bạn -->
        </form>
      </div>
    </div>

    <!-- JavaScript để load các file HTML -->
    <script>
      function loadHTML(element, file) {
  return new Promise(function (resolve, reject) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4) {
        if (this.status == 200) {
          element.innerHTML = this.responseText;
          resolve();  // Thông báo khi thành công
        } else {
          reject();  // Thông báo khi lỗi
        }
      }
    };
    xhttp.open("GET", file, true);
    xhttp.send();
  });
}

async function includeHTML() {
  var z = document.querySelectorAll("[w3-include-html]");
  for (var i = 0; i < z.length; i++) {
    var elmnt = z[i];
    var file = elmnt.getAttribute("w3-include-html");
    if (file) {
      try {
        await loadHTML(elmnt, file);  // Chờ nội dung được tải trước khi tiếp tục
        elmnt.removeAttribute("w3-include-html");
      } catch (error) {
        console.error("Error loading HTML:", error);
      }
    }
  }
}

document.addEventListener("DOMContentLoaded", includeHTML);

   </script>
<div class="content">
    <div class="container-fluid">
      <!-- your content here -->
      <div class="col-md-14">
        <div class="card ">
          <div class="card-header card-header-primary">
            <h4 class="card-title">Hóa đơn <?php echo $page;?> </h4>
          </div>
          <div class="card-body">
            <div class="table-responsive ps">
              <table class="table table-hover tablesorter " id="">
                <thead class=" text-primary">
                  <tr><th>STT</th><th>Sản phẩm</th><th>SĐT / Email</th><th>Địa chỉ</th><th>Số lượng</th><th>Tổng tiền</th>
                </tr></thead>
                <tbody>
                  <!-- <?php
                  $query = "SELECT * FROM orders_info";
                  $run = mysqli_query($con,$query);
                  if(mysqli_num_rows($run) > 0){


                   while($row = mysqli_fetch_array($run)){
                     $order_id = $row['order_id'];
                     $email = $row['email'];
                     $address = $row['address'];
                     $total_amount = $row['total_amt'];
                     $user_id = $row['user_id'];
                     $qty = $row['prod_count'];

                  ?>
                      <tr>
                        <td><?php echo $order_id ?></td>
                       <td> <?php
                        $query1 = "SELECT * FROM order_products where order_id = $order_id";
                        $run1 = mysqli_query($con,$query1); 
                          while($row1 = mysqli_fetch_array($run1)){
                           $product_id = $row1['product_id'];

                           $query2 = "SELECT * FROM products where product_id = $product_id";
                           $run2 = mysqli_query($con,$query2);

                           while($row2 = mysqli_fetch_array($run2)){
                           $product_title = $row2['product_title'];
                       ?>
                          <?php echo $product_title ?><br>
                        <?php }}?></td>
                        <td><?php echo $email ?></td>
                        <td><?php echo $address ?></td>
                        <td><?php echo $qty ?></td>
                        <td><?php echo $total_amount ?></td>
                     </tr>
                     <?php } ?>
                    
                </tbody>
                 <?php
               }else {
                 echo "<center><h2>Không có thành viên</h2><br><hr></center>";
                 }
              ?> -->
              </table>
              
            <div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 0px;"></div></div></div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
  <div w3-include-html="footer.html"></div> 
